= README for AZlink-TinyWidget

Amazon のベストセラーや新着ニューリリースと連動したブログパーツを作成できるサーバ設置型のスクリプトです。
ブログパーツパラメータに指定されたカテゴリの『ベストセラー』『新着ニューリリース』『ヒット商品』『一番ギフトとして贈られている商品』『リストの中で一番ほしい物』のいずれかの画像付き Amazon アフィリエイトリンクを表示します。アフィリエイトリンクは Amazon のベストセラー等と連動しており、常時最新のものが表示されます。

以前 AZlink/Widget という名前で提供していたウェブサービスの代替品の位置づけです。AZlink/Widget はサーバ維持困難に伴いサービスを停止いたしました。

== 主な特徴

1. Amazon のベストセラーや新着ニューリリースと連動して商品を表示します。ブログパーツに表示される商品は Amazon の販売動向に従って自動で更新されていきますので完全放置で売れ筋商品を常に表示できます。

2. JavaScript ブログパーツではブログパーツの処理が完了するまで次のコンテンツの表示が待たされることがありますが、このブログパーツでは JavaScript による処理待ちは発生しません。

3. できるだけ静的ファイルのみで処理するように実装していますので、アクセスが多めのサイトでもそれなりに動くと思います。

== 動作環境

PHP 5.2.16 以上が動作するウェブサーバ（Apache 2.2.9 と nginx 1.0.8+FastCGI で動作確認）

== インストール

1. https://github.com/sakuratan/AZlink-TinyWidget/downloads から azlink-tinywidget-1.0.1.zip をダウンロードしてください。

2. ウェブサーバ上で ZIP ファイルを展開してください。

3. パーミッションを確認してください。json ディレクトリと work ディレクトリはウェブサーバのユーザーから読み書きできる必要があります。（ZIP ファイル上のパーミッションは 777 にしていますが展開方法によってはパーミッションが落ちることがあります。）

4. index.html にアクセスしてブログパーツの動作確認を行ってください。

5. 実際のページにブログパーツを貼ってください。貼り方は index.html に記載しています。

== 設定

スクリプトの設定は config.php に記述してください。

インストールした状態では config.php は存在しませんので、設定値を変更する際は config.php.defaults を config.php にコピーし、config.php に設定を記述してください。（バージョンアップ等でアーカイブから上書きした場合に config.php も更新しないように config.php を配布対象から外しています。）

  cp config.php.defaults config.php

特に1秒辺りのページビューが1を越えるサイトでは、JSON_UPDATE_PROBARILITY の値を小さくすることをお勧めします。

== AZlink/Widget から移行する際の注意点

1. JavaScript のファイル名が tinywidget.min.js に変わっています。このスクリプト自体は従来の AZlink/Widget とは別物で、一部オプションに互換性がありません。

2. エントリポイントオブジェクトが AZlink.TinyWidget に変わっています。

3. 商品データのオブジェクト構造が変更されています。

4. データの取得を JSON で行っていますので、ドメイン越しでのスクリプトの実行はできません。
